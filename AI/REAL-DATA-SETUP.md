# 真实数据获取设置指南

## 🎯 目标
获取真实的温湿度传感器数据，而不是模拟数据。

## 🚀 解决方案：Node.js代理服务器

由于浏览器的CORS安全策略，我们无法直接从前端访问外部API。因此创建了一个Node.js代理服务器来解决这个问题。

## 📋 前置要求

1. **安装Node.js**
   - 访问 https://nodejs.org/
   - 下载并安装最新版本的Node.js

## 🔧 启动步骤
w
### 方法1：使用批处理文件（推荐）
1. 双击运行 `start-node-server.bat`
2. 等待服务器启动
3. 浏览器访问 http://localhost:3000

### 方法2：手动启动
1. 打开命令提示符
2. 进入项目目录
3. 运行命令：
   ```bash
   node proxy-server.js
   ```
4. 浏览器访问 http://localhost:3000

## 📁 相关文件

- `proxy-server.js` - Node.js代理服务器
- `js/weather-api-node.js` - 前端API客户端
- `weather-node-proxy.html` - 真实数据展示页面
- `start-node-server.bat` - 启动脚本

## 🌡️ 数据来源

- **API地址**: http://api.nlecloud.com
- **设备ID**: 1309651
- **账号**: 18856933077
- **温度标签**: temp
- **湿度标签**: shi_du

## ✅ 验证步骤

1. 启动代理服务器后，控制台应显示：
   ```
   代理服务器启动成功！
   访问地址: http://localhost:3000
   API地址: http://localhost:3000/api/weather
   ```

2. 访问页面后，应该看到：
   - 绿色状态指示器：代理服务器运行正常
   - 真实的温湿度数据（带小数点）
   - 数据每30秒自动更新

## 🔍 故障排除

### 问题1：Node.js未安装
**现象**: 双击bat文件提示"未找到Node.js"
**解决**: 安装Node.js后重试

### 问题2：端口被占用
**现象**: 启动时提示端口3000被占用
**解决**: 
- 关闭占用端口的程序
- 或修改proxy-server.js中的PORT变量

### 问题3：API连接失败
**现象**: 页面显示"获取数据失败"
**解决**: 
- 检查网络连接
- 确认API账号密码正确
- 查看服务器控制台的错误信息

### 问题4：CORS错误
**现象**: 浏览器控制台显示CORS错误
**解决**: 确保通过代理服务器访问（http://localhost:3000），而不是直接访问文件

## 🎉 成功标志

当一切正常时，您应该看到：
- 温度显示真实数值（如：24.50°C）
- 湿度显示真实数值（如：65.30%）
- 每次刷新页面数值保持一致（真实传感器读数）
- 数据每30秒自动更新

## 📞 技术支持

如果遇到问题，请检查：
1. Node.js是否正确安装
2. 代理服务器是否正常启动
3. 网络连接是否正常
4. 浏览器控制台是否有错误信息